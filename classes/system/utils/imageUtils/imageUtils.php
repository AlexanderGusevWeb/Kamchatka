<?php
 class imageUtils {private static $processor;public static function getImageProcessor() {if (self::$processor == null || get_class(self::$processor) == 'gdProcessor') {if (extension_loaded('imagick')) {self::$processor = new imageMagickProcessor();}else if (extension_loaded('gd')) {self::$processor = new gdProcessor();}else {self::throwNoModuleException();}}return self::$processor;}public static function getImageMagickProcessor (){if (extension_loaded('imagick')) {if (self::$processor == null || get_class(self::$processor) !== 'imageMagickProcessor') {self::$processor = new imageMagickProcessor();}}else {self::throwNoModuleException();}return self::$processor;}public static function getGDProcessor (){if (extension_loaded('gd')) {if (self::$processor == null || get_class(self::$processor) !== 'gdProcessor') {self::$processor = new gdProcessor();}}else {self::throwNoModuleException();}return self::$processor;}private static function throwNoModuleException (){throw new Exception('It does not install any image processing module.');}}